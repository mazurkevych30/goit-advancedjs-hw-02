{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\"\n\n\niziToast.settings({\n  timeout: 5000,\n  position: 'topRight',\n  icon: \"\",\n  transitionIn: \"fadeInRight\",\n  transitionOut: \"fadeOutLeft\",\n  close: false,\n});\n\n\nconst form = document.querySelector(\".form\");\nform[3].addEventListener(\"click\", onClick)\n\nfunction onClick(evt) {\n  evt.preventDefault();\n\n  let delayStart = Number(form[0].value);\n  const step = Number(form[1].value);\n  const amount = Number(form[2].value);\n  const promises = [];\n\n  for (let i = 1; i <= amount; i += 1){\n     if (i > 1) {\n      delayStart += step;\n    }\n    promises.push(createPromise(i, delayStart))\n  }\n  \n  Promise.allSettled(promises)\n    .then((items) => {\n      items.forEach((item) => {\n        let delayPromise = item.value ? item.value.delay : item.reason.delay;\n        setTimeout(() => {\n          if (item.status === \"fulfilled\") {\n            iziToast.success({\n              message: `✅ Fulfilled promise ${item.value.position} in ${delayPromise}ms`,\n            });\n          } else {\n            iziToast.error({\n              message: `❌ Rejected promise ${item.reason.position} in ${delayPromise}ms`,\n            });\n          }\n        }, delayPromise);\n      })\n    })\n    .catch((err) => {\n    console.log(err);\n  })\n}\n\n\nfunction createPromise(position, delay) {\n  return new Promise((resolve, reject) => {\n    const shouldResolve = Math.random() > 0.3;\n  if (shouldResolve) {\n    resolve({position, delay})\n  } else {\n    reject({position, delay})\n  }\n  })\n}"],"names":["iziToast","form","onClick","evt","delayStart","step","amount","promises","i","createPromise","items","item","delayPromise","err","position","delay","resolve","reject"],"mappings":"wIAKAA,EAAS,SAAS,CAChB,QAAS,IACT,SAAU,WACV,KAAM,GACN,aAAc,cACd,cAAe,cACf,MAAO,EACT,CAAC,EAGD,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3CA,EAAK,GAAG,iBAAiB,QAASC,CAAO,EAEzC,SAASA,EAAQC,EAAK,CACpBA,EAAI,eAAc,EAElB,IAAIC,EAAa,OAAOH,EAAK,GAAG,KAAK,EACrC,MAAMI,EAAO,OAAOJ,EAAK,GAAG,KAAK,EAC3BK,EAAS,OAAOL,EAAK,GAAG,KAAK,EAC7BM,EAAW,CAAA,EAEjB,QAASC,EAAI,EAAGA,GAAKF,EAAQE,GAAK,EAC3BA,EAAI,IACPJ,GAAcC,GAEhBE,EAAS,KAAKE,EAAcD,EAAGJ,CAAU,CAAC,EAG5C,QAAQ,WAAWG,CAAQ,EACxB,KAAMG,GAAU,CACfA,EAAM,QAASC,GAAS,CACtB,IAAIC,EAAeD,EAAK,MAAQA,EAAK,MAAM,MAAQA,EAAK,OAAO,MAC/D,WAAW,IAAM,CACXA,EAAK,SAAW,YAClBX,EAAS,QAAQ,CACf,QAAS,uBAAuBW,EAAK,MAAM,eAAeC,KACxE,CAAa,EAEDZ,EAAS,MAAM,CACb,QAAS,sBAAsBW,EAAK,OAAO,eAAeC,KACxE,CAAa,CAEJ,EAAEA,CAAY,CACvB,CAAO,CACP,CAAK,EACA,MAAOC,GAAQ,CAChB,QAAQ,IAAIA,CAAG,CACnB,CAAG,CACH,CAGA,SAASJ,EAAcK,EAAUC,EAAO,CACtC,OAAO,IAAI,QAAQ,CAACC,EAASC,IAAW,CAChB,KAAK,OAAM,EAAK,GAEtCD,EAAQ,CAAC,SAAAF,EAAU,MAAAC,CAAK,CAAC,EAEzBE,EAAO,CAAC,SAAAH,EAAU,MAAAC,CAAK,CAAC,CAE5B,CAAG,CACH"}